<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>全方面分析 Hilt 和 Koin 性能 - dhl</title><meta description="本文主要来一起分析一下 Hilt 和 Koin 的性能，如果你之前对 Hilt 和 Koin 不了解也没有关系，对阅读本文没有什么影响，接下来将会从以下几个方面来分析 Hilt 和 Koin 不同之处"><meta property="og:type" content="blog"><meta property="og:title" content="全方面分析 Hilt 和 Koin 性能"><meta property="og:url" content="https://www.hi-dhl.com/2020/08/22/jetpack/07-hilt-koin/"><meta property="og:site_name" content="dhl"><meta property="og:description" content="本文主要来一起分析一下 Hilt 和 Koin 的性能，如果你之前对 Hilt 和 Koin 不了解也没有关系，对阅读本文没有什么影响，接下来将会从以下几个方面来分析 Hilt 和 Koin 不同之处"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://cdn.51git.cn/2020-11-05-16045369438409.jpg"><meta property="article:published_time" content="2020-08-22T11:35:56.207Z"><meta property="article:modified_time" content="2020-11-05T00:47:30.845Z"><meta property="article:author" content="dhl"><meta property="article:tag" content="Android10"><meta property="article:tag" content="AndroidStudio"><meta property="article:tag" content="buildSrc"><meta property="article:tag" content="kotlin"><meta property="article:tag" content="run"><meta property="article:tag" content="with"><meta property="article:tag" content="let"><meta property="article:tag" content="also"><meta property="article:tag" content="apply"><meta property="article:tag" content="Jetpack"><meta property="article:tag" content="App Startup"><meta property="article:tag" content="Paging3"><meta property="article:tag" content="Hilt"><meta property="article:tag" content="Dagger"><meta property="article:tag" content="Koin"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://cdn.51git.cn/2020-11-05-16045369438409.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.hi-dhl.com/2020/08/22/jetpack/07-hilt-koin/"},"headline":"dhl","image":["http://cdn.51git.cn/2020-11-05-16045369438409.jpg"],"datePublished":"2020-08-22T11:35:56.207Z","dateModified":"2020-11-05T00:47:30.845Z","author":{"@type":"Person","name":"dhl"},"description":"本文主要来一起分析一下 Hilt 和 Koin 的性能，如果你之前对 Hilt 和 Koin 不了解也没有关系，对阅读本文没有什么影响，接下来将会从以下几个方面来分析 Hilt 和 Koin 不同之处"}</script><link rel="canonical" href="https://www.hi-dhl.com/2020/08/22/jetpack/07-hilt-koin/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><script type="text/javascript" src="/js/imaegoo/night.js"></script><canvas id="universe"></canvas><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img class="logo-img" src="/img/logo.png" alt="dhl" height="28"><img class="logo-img-dark" src="/img/logo.png" alt="dhl" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/categories/Jetpack">Jetpack</a><a class="navbar-item" href="/categories/Kotlin/">Kotlin</a><a class="navbar-item" href="/categories/Android10/">系统源码</a><a class="navbar-item" href="/categories/translated/">译文</a><a class="navbar-item" href="https://offer.hi-dhl.com">算法</a></div><div class="navbar-end"><a class="navbar-item night" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hi-dhl"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="http://cdn.51git.cn/2020-11-05-16045369438409.jpg" alt="全方面分析 Hilt 和 Koin 性能"></span></div><article class="card-content article" role="article"><h1 class="title is-3 is-size-4-mobile"></h1><h1 class="title is-3 is-size-4-mobile">全方面分析 Hilt 和 Koin 性能</h1><div class="article-meta size-small level is-mobile"><div class="level-left"><span class="mr-2"><i class="fa fa-calendar"></i></span><time class="level-item" dateTime="2020-08-22T11:35:56.207Z" title="2020-08-22T11:35:56.207Z">2020-08-22</time><span class="mr-2"> <i class="fa fa-folder"></i></span><span class="level-item"><a class="link-muted" href="/categories/Jetpack/">Jetpack</a></span><span class="mr-2"> <i class="fa fa-tag"></i></span><span class="level-item"><a class="link-muted" href="/tags/Jetpack/">Jetpack</a></span></div></div><div class="level-left article-meta size-small is-mobile"></div><div><p style="height:15px"></p><ul class="page-blockquote"><li>如果评论区没有及时回复，欢迎来公众号：ByteCode 咨询</li><li>公众号：ByteCode。致力于分享最新技术原创文章，涉及 Kotlin、Jetpack、算法、译文、系统源码相关的文章</li><li></li></ul><p style="height:15px"></p></div><div class="content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><strong>Hilt 系列文章</strong></p>
<ul>
<li><a href="https://mp.weixin.qq.com/s/6yqsc6P4aUn5alvzf9PPVg">Jetpack 成员 Hilt 实践（一）启程过坑记</a></li>
<li><a href="https://mp.weixin.qq.com/s/-B7pCNFncGaBW3AJEy8zWA">Jetpack 成员 Hilt 结合 App Startup（二）进阶篇</a></li>
<li><a href="https://mp.weixin.qq.com/s/VKyyNqAPFnlclGKnIbisAw">Jetpack 成员 Hilt 与 Dagger 区别 (三) 落地篇</a></li>
</ul>
<p>Koin、Dagger、Hilt 目前都是非常流行的库，面对这么多层出不穷的新技术，我们该做如何选择，是一直困扰我们的一个问题，之前我分析过 Koin 和  Dagger 的性能对比，Hilt 与 Dagger 的不同之处，可以点击下方链接前往查看。</p>
<ul>
<li><a href="https://juejin.im/post/5ebc1eb8e51d454dcf45744e?utm_source=gold_browser_extension">放弃 Dagger 拥抱 Koin</a></li>
<li><a href="https://juejin.im/post/5efca0c1e51d4534a40d972f">Jetpack 新成员 Hilt 与 Dagger 大不同（三）落地篇</a></li>
</ul>
<p>这是 Hilt 系列的第四篇，主要来分析 Hilt 和 Koin 的性能，如果你之前对 Hilt 和 Koin 不了解也没有关系，对阅读本文没有什么影响，接下来将会从以下几个方面来分析 Hilt 和 Koin 不同之处。</p>
<ul>
<li>依赖注入的优点？</li>
<li>Koin 为什么可以做到无代码生成、无反射？</li>
<li>AndroidStudio 支持 Hilt 和 Koin 在关联代码间进行导航吗？</li>
<li>Hilt 和 Koin 谁的编译速度更快？以及为什么？</li>
<li>比较 Hilt 和 Koin 代码行数？</li>
<li>Hilt 和 Koin 在使用上的区别，谁上手最快？</li>
</ul>
<h2 id="依赖注入的优点"><a href="#依赖注入的优点" class="headerlink" title="依赖注入的优点"></a>依赖注入的优点</h2><p>Koin 是为 Kotlin 开发者提供的一个实用型轻量级依赖注入框架，采用纯 Kotlin 语言编写而成，仅使用功能解析，无代理、无代码生成、无反射。</p>
<p>Hilt 是在 Dagger 基础上进行开发的，减少了在项目中进行手动依赖，Hilt 集成了 Jetpack 库和 Android 框架类，并删除了大部分模板代码，让开发者只需要关注如何进行绑定，同时 Hilt 也继承了 Dagger 优点，编译时正确性、运行时性能、并且得到了 Android Studio 的支持。</p>
<p>Hilt、Dagger、Koin 等等都是依赖注入库，依赖注入是面向对象设计中最好的架构模式之一，使用依赖注入库有以下优点：</p>
<ul>
<li>依赖注入库会自动释放不再使用的对象，减少资源的过度使用。</li>
<li>在指定范围内，可重用依赖项和创建的实例，提高代码的可重用性，减少了很多模板代码。</li>
<li>代码变得更具可读性。</li>
<li>易于构建对象。</li>
<li>编写低耦合代码，更容易测试。</li>
</ul>
<h2 id="Hilt-VS-Koin"><a href="#Hilt-VS-Koin" class="headerlink" title="Hilt VS Koin"></a>Hilt VS Koin</h2><p>接下来将从 AndroidStudio 基础支持、项目结构、代码行数、编译时间、使用上的不同，这几个方面对 Hilt 和 Koin 进行全方面的分析。</p>
<h3 id="Android-Studio-强大的基础支持"><a href="#Android-Studio-强大的基础支持" class="headerlink" title="Android Studio 强大的基础支持"></a>Android Studio 强大的基础支持</h3><p>Android Studio &gt;= 4.1 的版本，在编辑器和代码行号之间，增加了一个新的 “间距图标”，可以在 Dagger 的关联代码间进行导航，包括依赖项的生产者、消费者、组件、子组件以及模块。</p>
<p>Hilt 是在 Dagger 基础上进行开发的，所以 Hilt 自然也拥有了 Dagger 的优点，在 Android Studio &gt;= 4.1 版本上也支持在  Hilt 的关联代码间进行导航，如下图所示。</p>
<p><img src="http://cdn.51git.cn/2020-07-06-hilt.gif" alt="hilt"></p>
<p><strong>PS：</strong> 我用的版本是 Android Studio 4.1 Canary 10，命名和图标在不同版本上会有差异。</p>
<p>有了 Android Studio 支持，在 Android 应用中 Dagger 和 Hilt 在关联代码间进行导航是如此简单。</p>
<p><img src="http://cdn.51git.cn/2020-07-06-15938707938487.jpg" alt=""></p>
<p>这两个图标的意思如下：</p>
<ul>
<li>左边(向上箭头)的图标: 提供类型的地方 (即依赖项来自何处)</li>
<li>右边的图标: 类型被当作依赖项使用的地方</li>
</ul>
<p>遗憾的是 Koin 不支持，其实 Koin 并不需要这个功能，Koin 并不像 Hilt 注入代码那么分散，而且 Koin 注入关系很明确，可以很方便的定位到与它相关联的代码，并且 Koin 提供的 Debug 工具，可以打印出其构建过程，帮助我们分析。</p>
<p><img src="http://cdn.51git.cn/2020-07-06-15939246681168.jpg" alt="Koin 构建过程"></p>
<p>而 Hilt 不一样的是 Hilt 采用注解的方式，在使用 Hilt 的项目中，如果想要弄清楚其依赖项来自 @Inject 修饰的构造器、@Binds 或者 @Provides 修饰的方法？还是限定符？不是一件容易的事，尤其在一个大型复杂的的项目中，想要弄清楚它们之间的依赖关系是非常困难的，而 Android Studio &gt;= 4.1 的版本，增加的 “间距图标”，帮助我们解决了这个问题。</p>
<h3 id="比较-Hilt-和-Koin-项目结构"><a href="#比较-Hilt-和-Koin-项目结构" class="headerlink" title="比较 Hilt 和 Koin 项目结构"></a>比较 Hilt 和 Koin 项目结构</h3><p>为了能够正确比较这两种方式，新建了两个项目 Project-Hilt 和 Project-Koin，  分别用 Hilt 和 Koin 去实现，Project-Hilt 和 Project-Koin 两个项目的依赖库版本管理统一用 Composing builds 的方式（关于 Composing builds 请参考这篇文章 <a href="https://juejin.im/post/5ed3ef906fb9a047bf7070b6">再见吧 buildSrc, 拥抱 Composing builds 提升 Android 编译速度</a>），除了它们本身的依赖库，其他的依赖库都是相同的，如下图所示：</p>
<p><img src="http://cdn.51git.cn/2020-07-06-15939371374628.jpg" alt=""></p>
<p>项目 Project-Hilt 和 Project-Koin 都分别实现了 Room 和 Retrofit 进行数据库和网络访问，统一在 Repository 里面进行处理，它们的依赖注入都放在了 di 下面，这应该是一个小型 App 基础架构，如下图所示：</p>
<p><img src="http://cdn.51git.cn/2020-07-06-15939368537705.jpg" alt=""></p>
<p>如上图所示，这里需要关注 di 包下的类，Project-Hilt 和 Project-Koin 分别注入了 Room、Retrofit 和 Repository，以 Hilt 注入的方式至少需要三个文件才能完成，但是如果使用 Koin 的方式只需要一个文件就可以完成，后面我会进行详细的分析。</p>
<h3 id="比较-Koin-和-Hilt-代码行数"><a href="#比较-Koin-和-Hilt-代码行数" class="headerlink" title="比较 Koin 和 Hilt 代码行数"></a>比较 Koin 和 Hilt 代码行数</h3><p>项目 Project-Hilt 和 Project-Koin 除了它们本身的依赖之外，其他的依赖都是相同的。</p>
<p>我使用 <a href="https://plugins.jetbrains.com/plugin/4509-statistic">Statistic</a> 工具来进行代码行数的统计，反复对比了项目编译前和编译后，它们的结果如下所示：</p>
<table>
<thead>
<tr>
<th>代码行数</th>
<th>Hilt</th>
<th>Koin</th>
</tr>
</thead>
<tbody><tr>
<td>编译之前</td>
<td>2414</td>
<td>2414</td>
</tr>
<tr>
<td>编译之后</td>
<td>149608</td>
<td>138405</td>
</tr>
</tbody></table>
<p>正如你所见 Hilt 生成的代码多于 Koin，随着项目越来越复杂，生成的代码量会越来越多。</p>
<h3 id="比较-Koin-和-Hilt-编译时间"><a href="#比较-Koin-和-Hilt-编译时间" class="headerlink" title="比较 Koin 和 Hilt 编译时间"></a>比较 Koin 和 Hilt 编译时间</h3><p>为了保证测试的准确性，每次编译之前我都会先 clean 然后才会 rebuild，反复的进行了三次这样的操作，它们的结果如下所示。</p>
<p><strong>第一次编译结果：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hilt:</span><br><span class="line">BUILD SUCCESSFUL in 28s</span><br><span class="line">27 actionable tasks: 27 executed</span><br><span class="line"></span><br><span class="line">Koin:</span><br><span class="line">BUILD SUCCESSFUL in 17s</span><br><span class="line">27 actionable tasks: 27 executed</span><br></pre></td></tr></table></figure>

<p><strong>第二次编译结果：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hilt:</span><br><span class="line">BUILD SUCCESSFUL in 22s</span><br><span class="line">27 actionable tasks: 27 executed</span><br><span class="line"></span><br><span class="line">Koin:</span><br><span class="line">BUILD SUCCESSFUL in 15s</span><br><span class="line">27 actionable tasks: 27 executed</span><br></pre></td></tr></table></figure>

<p><strong>第三编译结果：</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hilt:</span><br><span class="line">BUILD SUCCESSFUL in 35s</span><br><span class="line">27 actionable tasks: 27 executed</span><br><span class="line"></span><br><span class="line">Koin:</span><br><span class="line">BUILD SUCCESSFUL in 18s</span><br><span class="line">27 actionable tasks: 27 executed</span><br></pre></td></tr></table></figure>

<p>每次的编译时间肯定是不一样的，速度取决于你的电脑的环境，不管执行多少次，结果如上所示 Hilt 编译时间总是大于 Koin，这个结果告诉我们，如果在一个非常大型的项目，这个代价是非常昂贵。</p>
<p><strong>为什么 Hilt 编译时间总是大于 Koin</strong></p>
<p>因为在 Koin 中不需要使用注解，也不需要用 kapt，这意味着没有额外的代码生成，所有的代码都是 Kotlin 原始代码，所以说  Hilt 编译时间总是大于 Koin，从这个角度上同时也解释了，为什么会说 Koin 仅使用功能解析，无额外代码生成。</p>
<h3 id="Koin-和-Hilt-使用上的不同"><a href="#Koin-和-Hilt-使用上的不同" class="headerlink" title="Koin 和 Hilt 使用上的不同"></a>Koin 和 Hilt 使用上的不同</h3><p>为了节省篇幅，这里只会列出部分代码，具体详细使用参考我之前写的 Hilt 入门三部曲，包含了 Hilt 所有的用法以及实战案例。</p>
<ul>
<li><a href="https://juejin.im/post/5ef2f31951882565a94e06a5?utm_source=gold_browser_extension">Jetpack 新成员 Hilt 实践（一）启程过坑记</a>：介绍了 Hilt 的常用注解、以及在实践过程中遇到的一些坑，Hilt 如何与 Android 框架类进行绑定，以及他们的生命周期。</li>
<li><a href="https://juejin.im/post/5ef7638c5188252e6a532db3">Jetpack 新成员 Hilt 实践之 App Startup（二）进阶篇</a>：分析注解的区别、限定符和作用域注解的使用，以及如何在 ViewModel、App Startup、ContentProvider 中使用等等。</li>
<li><a href="https://juejin.im/post/5efca0c1e51d4534a40d972f">Jetpack 新成员 Hilt 与 Dagger 大不同（三）落地篇</a>：Hilt 与 Dagger 不同之处，以及在多模块中局限性以及使用。</li>
</ul>
<p><strong>在项目中使用 Hilt</strong></p>
<p>如果我们需要在项目中使用 Hilt，我们需要添加 Hilt 插件和依赖库，首先在 project 的 build.gradle 添加以下依赖。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">buildscript &#123;</span><br><span class="line">    ...</span><br><span class="line">    dependencies &#123;</span><br><span class="line">        ...</span><br><span class="line">        classpath &#39;com.google.dagger:hilt-android-gradle-plugin:2.28-alpha&#39;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后在 App 模块中的 build.gradle 文件中添加以下代码。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">apply plugin: &#39;kotlin-kapt&#39;</span><br><span class="line">apply plugin: &#39;dagger.hilt.android.plugin&#39;</span><br><span class="line"></span><br><span class="line">android &#123;</span><br><span class="line">    compileOptions &#123;</span><br><span class="line">        sourceCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">        targetCompatibility JavaVersion.VERSION_1_8</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; For Kotlin projects</span><br><span class="line">    kotlinOptions &#123;</span><br><span class="line">        jvmTarget &#x3D; JavaVersion.VERSION_1_8.toString()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">dependencies &#123;</span><br><span class="line">    implementation &quot;com.google.dagger:hilt-android:2.28-alpha&quot;</span><br><span class="line">    kapt &quot;com.google.dagger:hilt-android-compiler:2.28-alpha&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong> 这里有一个坑，对于 Kotlin 项目，需要添加 kotlinOptions，这是 Google 文档 <a href="https://developer.android.com/training/dependency-injection/hilt-android">Dependency injection with Hilt</a> 中没有提到的，否则使用 ViewModel 会编译不过。</p>
<p>完成以上步骤就可以在项目中使用 Hilt 了，所有使用 Hilt 的 App 必须包含一个使用 <code>@HiltAndroidApp</code> 注解的 Application，这是依赖注入容器的入口。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@HiltAndroidApp</span><br><span class="line">class HiltApplication : Application() &#123;</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 1. 所有使用 Hilt 的 App 必须包含一个使用 @HiltAndroidApp 注解的 Application</span><br><span class="line">     * 2. @HiltAndroidApp 将会触发 Hilt 代码的生成，包括用作应用程序依赖项容器的基类</span><br><span class="line">     * 3. 生成的 Hilt 组件依附于 Application 的生命周期，它也是 App 的父组件，提供其他组件访问的依赖</span><br><span class="line">     * 4. 在 Application 中设置好 @HiltAndroidApp 之后，就可以使用 Hilt 提供的组件了，</span><br><span class="line">     *    Hilt 提供的 @AndroidEntryPoint 注解用于提供 Android 类的依赖（Activity、Fragment、View、Service、BroadcastReceiver）等等</span><br><span class="line">     *    Application 使用 @HiltAndroidApp 注解</span><br><span class="line">     *&#x2F;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>@HiltAndroidApp</code> 注解将会触发 Hilt 代码的生成，用作应用程序依赖项容器的基类，这下我们就可以在 di 包下注入 Room、Retrofit 和 Repository，其中 Room 和 Retrofit 比较简单，这里我们看一下 如何注入 Repository， Repository 有一个子类 TasksRepository，代码如下所示。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class TasksRepository @Inject constructor(</span><br><span class="line">    private val localDataSource: DataSource,</span><br><span class="line">    private val remoteDataSource: DataSource</span><br><span class="line">) : Repository</span><br></pre></td></tr></table></figure>

<p>TasksRepository 的构造函数包含了 localDataSource 和 remoteDataSource，需要构建这两个 DataSource 才能完成 TasksRepository 注入，代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">@Module</span><br><span class="line">@InstallIn(ApplicationComponent::class)</span><br><span class="line">object QualifierModule &#123;</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 为每个声明的限定符，提供对应的类型实例，和 @Binds 或者 @Provides 一起使用</span><br><span class="line">    @Qualifier</span><br><span class="line">    &#x2F;&#x2F; @Retention 定义了注解的生命周期，对应三个值（SOURCE、BINARY、RUNTIME）</span><br><span class="line">    &#x2F;&#x2F; AnnotationRetention.SOURCE：仅编译期，不存储在二进制输出中。</span><br><span class="line">    &#x2F;&#x2F; AnnotationRetention.BINARY：存储在二进制输出中，但对反射不可见。</span><br><span class="line">    &#x2F;&#x2F; AnnotationRetention.RUNTIME：存储在二进制输出中，对反射可见。</span><br><span class="line">    @Retention(AnnotationRetention.RUNTIME)</span><br><span class="line">    annotation class RemoteTasksDataSource &#x2F;&#x2F; 注解的名字，后面直接使用它</span><br><span class="line"></span><br><span class="line">    @Qualifier</span><br><span class="line">    @Retention(AnnotationRetention.RUNTIME)</span><br><span class="line">    annotation class LocalTasksDataSource</span><br><span class="line"></span><br><span class="line">    @Singleton</span><br><span class="line">    @RemoteTasksDataSource</span><br><span class="line">    @Provides</span><br><span class="line">    fun provideTasksRemoteDataSource(): DataSource &#123; &#x2F;&#x2F; 返回值相同</span><br><span class="line">        return RemoteDataSource() &#x2F;&#x2F; 不同的实现</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Singleton</span><br><span class="line">    @LocalTasksDataSource</span><br><span class="line">    @Provides</span><br><span class="line">    fun provideTaskLocalDataSource(appDatabase: AppDataBase): DataSource &#123; &#x2F;&#x2F; 返回值相同</span><br><span class="line">        return LocalDataSource(appDatabase.personDao()) &#x2F;&#x2F; 不同的实现</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Singleton</span><br><span class="line">    @Provides</span><br><span class="line">    fun provideTasksRepository(</span><br><span class="line">        @LocalTasksDataSource localDataSource: DataSource,</span><br><span class="line">        @RemoteTasksDataSource remoteDataSource: DataSource</span><br><span class="line">    ): Repository &#123;</span><br><span class="line">        return TasksRepository(</span><br><span class="line">            localDataSource,</span><br><span class="line">            remoteDataSource</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这只是 Repository 注入代码，当然这并不是全部，还有 Room、Retrofit、Activity、Fragment、ViewModel 等等需要注入，随着项目越来越复杂，多模块化的拆分，还有更多的事情需要去做。</p>
<p>Hilt 和 Dagger 比起来虽然简单很多，但是 Hilt 相比于 Koin，其入门的门槛还是很高的，尤其是 Hilt 的注解，需要了解其每个注解的含义才能正确的使用，避免资源的浪费，但是对于注解的爱好者来说，可能更偏向于使用 Hilt，接下来我们来看一下如何在项目中使用 Koin。</p>
<p><strong>在项目中使用 Koin</strong></p>
<p>如果要在项目中使用 Koin，需要在项目中添加 Koin 的依赖，我们只需要在 App 模块中的 build.gradle 文件中添加以下代码。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">implementation “org.koin:koin-core:2.1.5”</span><br><span class="line">implementation “org.koin:koin-androidx-viewmodel:2.1.5”</span><br></pre></td></tr></table></figure>

<p>如果需要在项目中使用 Koin 进行依赖注入，需要在 Application 或者其他的地方进行初始化。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class KoinApplication : Application() &#123;</span><br><span class="line"></span><br><span class="line">    override fun onCreate() &#123;</span><br><span class="line">        super.onCreate()</span><br><span class="line">        startKoin &#123;</span><br><span class="line">            AndroidLogger(Level.DEBUG)</span><br><span class="line">            androidContext(this@KoinApplication)</span><br><span class="line">            modules(appModule)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当初始化完成之后，就可以在项目中使用 Koin 了，首先我们来看一下如何在项目中注入 Repository， Repository 有一个子类 TasksRepository，代码和上文介绍的一样，需要在其构造函数构造 localDataSource 和 remoteDataSource 两个 DataSource。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">class TasksRepository @Inject constructor(</span><br><span class="line">    private val localDataSource: DataSource,</span><br><span class="line">    private val remoteDataSource: DataSource</span><br><span class="line">) : Repository</span><br></pre></td></tr></table></figure>

<p>那么在 Koin 中如何注入呢，很简单，只需要几行代码就可以完成。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">val repoModule &#x3D; module &#123;</span><br><span class="line">    single &#123; LocalDataSource(get()) &#125;</span><br><span class="line">    single &#123; RemoteDataSource() &#125;</span><br><span class="line">    single &#123; TasksRepository(get(), get()) &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 添加所有需要在 Application 中进行初始化的 module</span><br><span class="line">val appModule &#x3D; listOf(repoModule)</span><br></pre></td></tr></table></figure>

<p>和上面 Hilt 长长的代码比起来，Koin 是不是简单很多，那么 Room、Retrofit、ViewModel 如何注入呢，也很简单，代码如下所示。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 注入 ViewModel</span><br><span class="line">val viewModele &#x3D; module &#123;</span><br><span class="line">    viewModel &#123; MainViewModel(get()) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 注入 Room</span><br><span class="line">val localModule &#x3D; module &#123;</span><br><span class="line">    single &#123; AppDataBase.initDataBase(androidApplication()) &#125;</span><br><span class="line">    single &#123; get&lt;AppDataBase&gt;().personDao() &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 注入 Retrofit</span><br><span class="line">val remodeModule &#x3D; module &#123;</span><br><span class="line">    single &#123; GitHubService.createRetrofit() &#125;</span><br><span class="line">    single &#123; get&lt;Retrofit&gt;().create(GitHubService::class.java) &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 添加所有需要在 Application 中进行初始化的 module</span><br><span class="line">val appModule &#x3D; listOf(viewModele, localModule, remodeModule)</span><br></pre></td></tr></table></figure>

<p>上面 Koin 的代码严格意义上讲，其实不太规范，在这里只是为了和 Hilt 进行更好的对比。</p>
<p>到这里是不是感觉 Hilt 相比于 Koin 是不是简单很多，在阅读 Hilt 文档的时候花了好几天时间才消化，而 Koin 只需要花很短的时间。</p>
<p>我们在看一下使用 Hilt 和 Koin 完成 Room、Retrofit、Repository 和 ViewModel 等等全部的依赖注入需要多少行代码。</p>
<table>
<thead>
<tr>
<th>依赖注入框架</th>
<th>Hilt</th>
<th>Koin</th>
</tr>
</thead>
<tbody><tr>
<td>代码行数</td>
<td>122</td>
<td>42</td>
</tr>
</tbody></table>
<p>正如你所见依赖注入部分的代码 Hilt 多于 Koin，示例中只是一个基本的项目架构，实际的项目往往比这要复杂的很多，所需要的代码也更多，也越来越复杂。</p>
<p>不仅仅如此而已，根据 Koin 文档介绍，Koin 不需要用到反射，那么无反射 Koin 是如何实现的呢，因为 Koin 基于 kotlin 基础上进行开发的，使用了 kotlin 强大的语法糖（例如 Inline、Reified 等等）和函数式编程，来看一个简单的例子。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">inline fun &lt;reified T : ViewModel&gt; Module.viewModel(</span><br><span class="line">    qualifier: Qualifier? &#x3D; null,</span><br><span class="line">    override: Boolean &#x3D; false,</span><br><span class="line">    noinline definition: Definition&lt;T&gt;</span><br><span class="line">): BeanDefinition&lt;T&gt; &#123;</span><br><span class="line">    val beanDefinition &#x3D; factory(qualifier, override, definition)</span><br><span class="line">    beanDefinition.setIsViewModel()</span><br><span class="line">    return beanDefinition</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内联函数支持具体化的类型参数，使用 reified 修饰符来限定类型参数，可以在函数内部访问它，由于函数是内联的，所以不需要反射。</p>
<p>但是在另一方面 Koin 相比于 Hilt 错误提示不够友好，Hilt 是基于 Dagger 基础上进行开发的，所以 Hilt 自然也拥有了 Dagger 的优点，编译时正确性，对于一个大型项目来说，这是一个非常严重的问题，因为我们更喜欢编译错误而不是运行时错误。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>我们总共从以下几个方面对 Hilt 和 Koin 进行全方面的分析：</p>
<ul>
<li><p>AndroidStudio 支持 Hilt 在关联代码间进行导航，支持在 @Inject 修饰的构造器、@Binds 或者 @Provides 修饰的方法、限定符之间进行跳转。</p>
</li>
<li><p>项目结构：完成 Hilt 的依赖注入需要的文件往往多于 Koin。</p>
</li>
<li><p>代码行数：使用 <a href="https://plugins.jetbrains.com/plugin/4509-statistic">Statistic</a> 工具来进行代码统计，反复对比了项目编译前和编译后，Hilt 生成的代码多于 Koin，随着项目越来越复杂，生成的代码量会越来越多。</p>
<table>
<thead>
<tr>
<th>代码行数</th>
<th>Hilt</th>
<th>Koin</th>
</tr>
</thead>
<tbody><tr>
<td>编译之前</td>
<td>2414</td>
<td>2414</td>
</tr>
<tr>
<td>编译之后</td>
<td>149608</td>
<td>138405</td>
</tr>
</tbody></table>
</li>
<li><p>编译时间：Hilt 编译时间总是大于 Koin，这个结果告诉我们，如果是在一个非常大型的项目，这个代价是非常昂贵。</p>
  <figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Hilt:</span><br><span class="line">BUILD SUCCESSFUL in 35s</span><br><span class="line">27 actionable tasks: 27 executed</span><br><span class="line"></span><br><span class="line">Koin:</span><br><span class="line">BUILD SUCCESSFUL in 18s</span><br><span class="line">27 actionable tasks: 27 executed</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用上对比：Hilt 使用起来要比 Koin 麻烦很多，其入门门槛高于 Koin，在阅读 Hilt 文档的时候花了好几天时间才消化，而 Koin 只需要花很短的时间，依赖注入部分的代码 Hilt 多于 Koin，在一个更大更复杂的项目中所需要的代码也更多，也越来越复杂。</p>
<table>
<thead>
<tr>
<th>依赖注入框架</th>
<th>Hilt</th>
<th>Koin</th>
</tr>
</thead>
<tbody><tr>
<td>代码行数</td>
<td>122</td>
<td>42</td>
</tr>
</tbody></table>
</li>
</ul>
<p><strong>为什么 Hilt 编译时间总是大于 Koin？</strong></p>
<p>因为在 Koin 中不需要使用注解，也不需要 kapt，这意味着没有额外的代码生成，所有的代码都是 Kotlin 原始代码，所以说  Hilt 编译时间总是大于 Koin，从这个角度上同时也解释了，为什么会说 Koin 仅使用功能解析，无额外代码生成。</p>
<p><strong>为什么 Koin 不需要用到反射？</strong></p>
<p>因为 Koin 基于 kotlin 基础上进行开发的，使用了 kotlin 强大的语法糖（例如 Inline、Reified 等等）和函数式编程，来看一个简单的例子。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">inline fun &lt;reified T : ViewModel&gt; Module.viewModel(</span><br><span class="line">    qualifier: Qualifier? &#x3D; null,</span><br><span class="line">    override: Boolean &#x3D; false,</span><br><span class="line">    noinline definition: Definition&lt;T&gt;</span><br><span class="line">): BeanDefinition&lt;T&gt; &#123;</span><br><span class="line">    val beanDefinition &#x3D; factory(qualifier, override, definition)</span><br><span class="line">    beanDefinition.setIsViewModel()</span><br><span class="line">    return beanDefinition</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内联函数支持具体化的类型参数，使用 reified 修饰符来限定类型参数，可以在函数内部访问它，由于函数是内联的，所以不需要反射。</p>
<blockquote>
<p>正在建立一个最全、最新的 AndroidX Jetpack 相关组件的实战项目 以及 相关组件原理分析文章，正在逐渐增加 Jetpack 新成员，仓库持续更新，可以前去查看：<a href="https://github.com/hi-dhl/AndroidX-Jetpack-Practice">AndroidX-Jetpack-Practice</a>, 如果这个仓库对你有帮助，请在仓库右上角帮我点个赞，后面我会陆续完成更多 Jetpack 新成员的项目实践</p>
</blockquote>
</div><div><p style="height:15px"></p><ul class="page-copyright"><li><strong>本文作者：</strong>hi-dhl</li><li><strong>本文标题：</strong>全方面分析 Hilt 和 Koin 性能</li><li><strong>本文链接：</strong><a href="" title="{page.title}">https://hi-dhl.com/2020/08/22/jetpack/07-hilt-koin/</a></li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://hi-dhl.com" title="{page.title}">hi-dhl</a></li></ul><p style="height:15px"></p></div><!--!--><h1 class="title is-4 is-size-4-mobile"></h1></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/08/22/jetpack/08-PokemonGo/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">神奇宝贝  眼前一亮的 Jetpack + MVVM 极简实战</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/08/22/jetpack/06-hilt-dagger/"><span class="level-item">Jetpack 新成员 Hilt 与 Dagger 大不同（三）落地篇</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content template"><p align="center"><img src="http://cdn.51git.cn/2020-10-07-bytecode.png"></p><p>致力于分享一系列 Android 系统源码、逆向分析、算法、翻译、Jetpack 源码相关的文章，在技术的道路上一起前进</p><h3 class="title is-4">Android10 源码分析</h3><p>正在写一系列的 Android 10 源码分析的文章，了解系统源码，不仅有助于分析问题，在面试过程中，对我们也是非常有帮助的，如果你同我一样喜欢研究 Android 源码，可以关注我 GitHub 上的 <a href="https://github.com/hi-dhl/Android10-Source-Analysis">Android10-Source-Analysis</a>。</p><h3 class="title is-4">算法题库的归纳和总结</h3><p>由于 LeetCode 的题库庞大，每个分类都能筛选出数百道题，由于每个人的精力有限，不可能刷完所有题目，因此我按照经典类型题目去分类、和题目的难易程度去排序。</p><ul><li>数据结构： 数组、栈、队列、字符串、链表、树……</li><li>算法： 查找算法、搜索算法、位运算、排序、数学、……</li></ul><p>每道题目都会用 Java 和 kotlin 去实现，并且每道题目都有解题思路，如果你同我一样喜欢算法、LeetCode，可以关注我 GitHub 上的 LeetCode 题解：<a href="https://github.com/hi-dhl/Leetcode-Solutions-with-Java-And-Kotlin">Leetcode-Solutions-with-Java-And-Kotlin</a>。</p><h3 class="title is-4">精选国外的技术文章</h3><p>目前正在整理和翻译一系列精选国外的技术文章，不仅仅是翻译，很多优秀的英文技术文章提供了很好思路和方法，每篇文章都会有<strong>译者思考</strong>部分，对原文的更加深入的解读，可以关注我 GitHub 上的 <a href="https://github.com/hi-dhl/Technical-Article-Translation">Technical-Article-Translation</a>。</p><p></p></div></div><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.3.10/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            notify: false,
            verify: undefined,
            appId: 'zfvr24HFhzQ5vtHkr4NQ1fmW-gzGzoHsz',
            appKey: 'RChgr9mR005hgu4yiQ4WQU3O',
            placeholder: '说点什么',
            avatar: 'mm',
            avatarForce: false,
            meta: ["nick","mail","link"],
            pageSize: 10,
            visitor: false,
            highlight: true,
            recordIP: false
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" style="max-height: 500px;overflow: auto;"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="is-flex" href="#前言"><span>前言</span></a></li><li><a class="is-flex" href="#依赖注入的优点"><span>依赖注入的优点</span></a></li><li><a class="is-flex" href="#Hilt-VS-Koin"><span>Hilt VS Koin</span></a><ul class="menu-list"><li><a class="is-flex" href="#Android-Studio-强大的基础支持"><span>Android Studio 强大的基础支持</span></a></li><li><a class="is-flex" href="#比较-Hilt-和-Koin-项目结构"><span>比较 Hilt 和 Koin 项目结构</span></a></li><li><a class="is-flex" href="#比较-Koin-和-Hilt-代码行数"><span>比较 Koin 和 Hilt 代码行数</span></a></li><li><a class="is-flex" href="#比较-Koin-和-Hilt-编译时间"><span>比较 Koin 和 Hilt 编译时间</span></a></li><li><a class="is-flex" href="#Koin-和-Hilt-使用上的不同"><span>Koin 和 Hilt 使用上的不同</span></a></li></ul></li><li><a class="is-flex" href="#总结"><span>总结</span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2021-10-14T01:02:29.585Z">2021-10-14</time></p><p class="title is-6"><a class="link-muted" href="/2021/10/14/algorithm/04-loop-queue/">独家 | 跟源码学数据结构 | 循环队列</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-09-27T00:48:32.866Z">2021-09-27</time></p><p class="title is-6"><a class="link-muted" href="/2021/09/27/algorithm/03-arraydeque2/">图解 ArrayDeque 比 LinkedList 快</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-09-24T01:14:31.412Z">2021-09-24</time></p><p class="title is-6"><a class="link-muted" href="/2021/09/24/algorithm/02-arraydeque/">为什么不推荐 ArrayDeque 代替 Stack</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-09-14T15:25:21.231Z">2021-09-14</time></p><p class="title is-6"><a class="link-muted" href="/2021/09/14/algorithm/01-stack/">算法动画图解 | 被 &quot;废弃&quot; 的 Java 栈，为什么还在用</a></p><p class="is-uppercase"></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2021-09-05T08:00:50.111Z">2021-09-05</time></p><p class="title is-6"><a class="link-muted" href="/2021/09/05/kotlin/12-kotlin-optimize/">影响性能的 Kotlin 代码（一）</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android-12/"><span class="level-start"><span class="level-item">Android 12</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android-AndroidStudio/"><span class="level-start"><span class="level-item">Android,AndroidStudio</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android10/"><span class="level-start"><span class="level-item">Android10</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/AndroidStudio/"><span class="level-start"><span class="level-item">AndroidStudio</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Jetpack/"><span class="level-start"><span class="level-item">Jetpack</span></span><span class="level-end"><span class="level-item tag">15</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Linux/"><span class="level-start"><span class="level-item">Linux</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="level-start"><span class="level-item">数据结构</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E6%9D%82%E8%B0%88/"><span class="level-start"><span class="level-item">杂谈</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%AE%97%E6%B3%95%E5%8A%A8%E7%94%BB/"><span class="level-start"><span class="level-item">算法动画</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/translated/"><span class="level-start"><span class="level-item">译文</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%91%E6%96%87-AndroidStudio/"><span class="level-start"><span class="level-item">译文,AndroidStudio</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E8%AF%91%E6%96%87-Kotlin/"><span class="level-start"><span class="level-item">译文,Kotlin</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">8</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-12/"><span class="tag">Android 12</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android10-%E5%8C%85%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><span class="tag">Android10-包管理系统</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android10-%E7%AA%97%E5%8F%A3%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><span class="tag">Android10-窗口管理系统</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android10-%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/"><span class="tag">Android10-资源管理系统</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AndroidStudio/"><span class="tag">AndroidStudio</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android%E6%BA%90%E7%A0%81/"><span class="tag">Android源码</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Compose/"><span class="tag">Compose</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Fragment/"><span class="tag">Fragment</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jetpack/"><span class="tag">Jetpack</span><span class="tag is-grey-lightest">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Koin/"><span class="tag">Koin</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag is-grey-lightest">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/LeetCode/"><span class="tag">LeetCode</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Linux/"><span class="tag">Linux</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Protobuf/"><span class="tag">Protobuf</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Shell/"><span class="tag">Shell</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kotlin/"><span class="tag">kotlin</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%8A%A8%E7%94%BB/"><span class="tag">动画</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">数据结构</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9D%82%E8%B0%88/"><span class="tag">杂谈</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%91%E6%96%87/"><span class="tag">译文</span><span class="tag is-grey-lightest">9</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level-item"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img class="logo-img" src="/img/logo.png" alt="dhl" height="28"><img class="logo-img-dark" src="/img/logo.png" alt="dhl" height="28"></a><p class="size-small"><span>&copy; 2021 dhl</span>  <a href="http://www.beian.miit.gov.cn/" target="_blank">京ICP备18050211号-2</a>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://www.hi-dhl.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: false,
                    fold: ''
                }
            }
        };</script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://s9.cnzz.com/z_stat.php?id=1278919895&amp;web_id=1278919895" async></script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/imaegoo/universe.js"></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>